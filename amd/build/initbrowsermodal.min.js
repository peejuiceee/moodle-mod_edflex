define("mod_edflex/initbrowsermodal",["exports","core/modal_factory","core/modal_events","core/notification","./browsercomponent"],(function(_exports,_modal_factory,_modal_events,_notification,_browsercomponent){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Initializes and displays the activity modal with the provided course data.
   *
   * @module    mod_edflex/initbrowsermodal
   * @copyright 2025 Edflex <support@edflex.com>
   * @license   https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_browsercomponent=_interopRequireDefault(_browsercomponent);_exports.init=()=>{function initActivityModal(coursedata){_modal_factory.default.create({type:_modal_factory.default.types.DEFAULT,title:M.util.get_string("edflexbrowsertitle","mod_edflex"),body:'<div class="edflex-browser-wrapper">\n                        <div class="my-3 py-5 text-center"><div class="spinner-border" role="status"></div></div>\n                   </div>',footer:"<div></div>",large:!0}).then((modal=>(modal.show(),modal.getRoot().on(_modal_events.default.hidden,(()=>{modal.destroy()})),new _browsercomponent.default({element:modal.getRoot()[0].querySelector(".edflex-browser-wrapper"),coursedata:coursedata}),!0))).catch(_notification.exception)}document.body.addEventListener("click",(e=>{if(e.target.closest('[name="openedflexbrowser"]')){e.preventDefault();const url=new URL(window.location);return initActivityModal({course:url.searchParams.get("course"),section:url.searchParams.get("section")})}if(e.target.closest('[data-modname^="mod_edflex"]')){const el=e.target.closest('[data-modname^="mod_edflex"]'),href=el&&el.querySelector('[data-action="add-chooser-option"]').getAttribute("href");if(!href)return!1;e.preventDefault();const url=new URL(href);return initActivityModal({course:url.searchParams.get("id"),section:url.searchParams.get("section")})}}))}}));

//# sourceMappingURL=initbrowsermodal.min.js.map